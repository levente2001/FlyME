{"ast":null,"code":"import _defineProperty from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{Link,Redirect}from\"react-router-dom\";import{authStates,withAuth}from\"../components/auth\";import en from\"../utils/i18n\";import Loader from\"../components/loader\";import{signIn}from\"../utils/firebase\";import{validateEmailPassword}from\"../utils/helpers\";import plane from'../assets/plane.png';import\"../styles/login.css\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={email:\"\",password:\"\",retype:\"\",error:\"\"};_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"handleInputChange\",value:function handleInputChange(event){var _this$setState;var target=event.target;var value=target.value;var name=target.name;this.setState((_this$setState={},_defineProperty(_this$setState,name,value),_defineProperty(_this$setState,\"error\",\"\"),_this$setState));}},{key:\"handleSubmit\",value:function handleSubmit(event){var _this2=this;event.preventDefault();if(this.state.error){return;}//Validate email & password\nvar errorMsg=validateEmailPassword(this.state.email,this.state.password);if(errorMsg){this.setState({error:errorMsg});return;}signIn(this.state.email,this.state.password).then(function(){console.log(\"Signed In\");}).catch(function(e){console.log(\"Error signing in\",e);_this2.setState({error:\"Incorrect email/password\"});});}},{key:\"render\",value:function render(){if(this.props.authState===authStates.INITIAL_VALUE){return/*#__PURE__*/React.createElement(Loader,null);}if(this.props.authState===authStates.LOGGED_IN){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}var errorMsg=this.state.error;return/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"welcomecard\"},/*#__PURE__*/React.createElement(\"h1\",null,\"FlyMe!\"),/*#__PURE__*/React.createElement(\"img\",{className:\"img\",src:plane,alt:\"description\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"inputfield\"},/*#__PURE__*/React.createElement(\"h2\",null,en.GREETINGS.LOGIN),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:en.FORM_FIELDS.EMAIL,name:\"email\",onChange:this.handleInputChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:en.FORM_FIELDS.PASSWORD,name:\"password\",onChange:this.handleInputChange,required:true}),errorMsg&&/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},errorMsg),/*#__PURE__*/React.createElement(\"button\",{id:\"login-button\",type:\"submit\"},\"Login\"),/*#__PURE__*/React.createElement(\"p\",null,en.FORM_FIELDS.LOGIN_ALT_TEXT),/*#__PURE__*/React.createElement(Link,{className:\"link\",to:\"/signup\"},\"Sign up\"))));}}]);return Login;}(React.Component);export default withAuth(Login);","map":{"version":3,"sources":["/Users/kalolevente/Downloads/planetaxi/src/pages/login.js"],"names":["React","Link","Redirect","authStates","withAuth","en","Loader","signIn","validateEmailPassword","plane","Login","props","state","email","password","retype","error","handleInputChange","bind","handleSubmit","event","target","value","name","setState","preventDefault","errorMsg","then","console","log","catch","e","authState","INITIAL_VALUE","LOGGED_IN","GREETINGS","LOGIN","FORM_FIELDS","EMAIL","PASSWORD","LOGIN_ALT_TEXT","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nimport { authStates, withAuth } from \"../components/auth\";\nimport en from \"../utils/i18n\";\nimport Loader from \"../components/loader\";\nimport { signIn } from \"../utils/firebase\";\nimport { validateEmailPassword } from \"../utils/helpers\";\n\nimport plane from '../assets/plane.png';\n\nimport \"../styles/login.css\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\",\n      retype: \"\",\n      error: \"\",\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n\n    this.setState({\n      [name]: value,\n      error: \"\",\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    if (this.state.error) {\n      return;\n    }\n\n    //Validate email & password\n    const errorMsg = validateEmailPassword(\n      this.state.email,\n      this.state.password\n    );\n\n    if (errorMsg) {\n      this.setState({\n        error: errorMsg,\n      });\n      return;\n    }\n\n    signIn(this.state.email, this.state.password)\n      .then(() => {\n        console.log(\"Signed In\");\n      })\n      .catch(e => {\n        console.log(\"Error signing in\", e);\n        this.setState({\n          error: \"Incorrect email/password\",\n        });\n      });\n  }\n  render() {\n    if (this.props.authState === authStates.INITIAL_VALUE) {\n      return <Loader />;\n    }\n\n    if (this.props.authState === authStates.LOGGED_IN) {\n      return <Redirect to=\"/\"></Redirect>;\n    }\n\n    const errorMsg = this.state.error;\n\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"container\">\n\n          <div className=\"welcomecard\">\n            <h1>FlyMe!</h1>\n            <img className=\"img\" src={plane} alt=\"description\" />\n          </div>\n\n          <div className=\"inputfield\">\n            <h2>{en.GREETINGS.LOGIN}</h2>\n\n            <input\n              type=\"text\"\n              placeholder={en.FORM_FIELDS.EMAIL}\n              name=\"email\"\n              onChange={this.handleInputChange}\n              required\n            />\n\n            <input\n              type=\"password\"\n              placeholder={en.FORM_FIELDS.PASSWORD}\n              name=\"password\"\n              onChange={this.handleInputChange}\n              required\n            />\n            {errorMsg && <p className=\"error\">{errorMsg}</p>}\n            <button id=\"login-button\" type=\"submit\">\n              Login\n            </button>\n\n            <p>{en.FORM_FIELDS.LOGIN_ALT_TEXT}</p>\n            <Link className=\"link\" to=\"/signup\">Sign up</Link>\n          </div>\n          \n        </div>\n      </form>\n    );\n  }\n}\n\nexport default withAuth(Login);\n"]},"metadata":{},"sourceType":"module"}