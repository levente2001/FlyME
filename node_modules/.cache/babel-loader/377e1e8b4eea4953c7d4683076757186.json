{"ast":null,"code":"import _defineProperty from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{Link,Redirect}from\"react-router-dom\";import{authStates,withAuth}from\"../components/auth\";import en from\"../utils/i18n\";import{createNewUser}from\"../utils/firebase\";import Loader from\"../components/loader\";import{validateEmailPassword}from\"../utils/helpers\";import\"../styles/login.css\";import plane from'../assets/plane.png';var SignUp=/*#__PURE__*/function(_React$Component){_inherits(SignUp,_React$Component);var _super=_createSuper(SignUp);function SignUp(props){var _this;_classCallCheck(this,SignUp);_this=_super.call(this,props);_this.state={email:\"\",password:\"\",retype:\"\",error:\"\"};_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(SignUp,[{key:\"handleInputChange\",value:function handleInputChange(event){var _this$setState;var target=event.target;var value=target.value;var name=target.name;this.setState((_this$setState={},_defineProperty(_this$setState,name,value),_defineProperty(_this$setState,\"error\",\"\"),_this$setState));//Verify that password fields match\nif(target.type===\"password\"){this.setState(function(state){if(state.password!==state.retype){return{error:en.ERRORS.PASSWORD_MISMATCH};}});}}},{key:\"handleSubmit\",value:function handleSubmit(event){var _this2=this;event.preventDefault();if(this.state.error){return;}//Validate email & password\nvar errorMsg=validateEmailPassword(this.state.email,this.state.password);if(errorMsg){this.setState({error:errorMsg});return;}createNewUser(this.state.email,this.state.password).then(function(){console.log(\"Signed Up!\");}).catch(function(e){console.log(\"Error signing up\",e);if(e.code===\"auth/email-already-in-use\"){_this2.setState({error:\"Email already in use\"});}});}},{key:\"render\",value:function render(){if(this.props.authState===authStates.INITIAL_VALUE){return/*#__PURE__*/React.createElement(Loader,null);}if(this.props.authState===authStates.LOGGED_IN){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}var errorMsg=this.state.error;return/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"welcomecard\"},/*#__PURE__*/React.createElement(\"h1\",null,\"FlyMe!\"),/*#__PURE__*/React.createElement(\"img\",{className:\"img\",src:plane,alt:\"description\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"inputfield\"},/*#__PURE__*/React.createElement(\"h2\",null,en.GREETINGS.SIGNUP),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:en.FORM_FIELDS.EMAIL,name:\"email\",onChange:this.handleInputChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:en.FORM_FIELDS.PASSWORD,name:\"password\",onChange:this.handleInputChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:en.FORM_FIELDS.RETYPE_PASSWORD,name:\"retype\",onChange:this.handleInputChange,required:true}),errorMsg&&/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},\"Error: \",errorMsg),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Signup\"),/*#__PURE__*/React.createElement(\"p\",null,\"Already a member?\"),/*#__PURE__*/React.createElement(Link,{className:\"link\",to:\"/login\"},\"Login\"))));}}]);return SignUp;}(React.Component);export default withAuth(SignUp);","map":{"version":3,"sources":["/Users/kalolevente/Downloads/planetaxi/src/pages/signup.js"],"names":["React","Link","Redirect","authStates","withAuth","en","createNewUser","Loader","validateEmailPassword","plane","SignUp","props","state","email","password","retype","error","handleInputChange","bind","handleSubmit","event","target","value","name","setState","type","ERRORS","PASSWORD_MISMATCH","preventDefault","errorMsg","then","console","log","catch","e","code","authState","INITIAL_VALUE","LOGGED_IN","GREETINGS","SIGNUP","FORM_FIELDS","EMAIL","PASSWORD","RETYPE_PASSWORD","Component"],"mappings":"wtBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,kBAA/B,CAEA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,oBAArC,CACA,MAAOC,CAAAA,EAAP,KAAe,eAAf,CACA,OAASC,aAAT,KAA8B,mBAA9B,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,OAASC,qBAAT,KAAsC,kBAAtC,CAEA,MAAO,qBAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,C,GAEMC,CAAAA,M,4GACJ,gBAAYC,KAAZ,CAAmB,wCACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,KAAK,CAAE,EADI,CAEXC,QAAQ,CAAE,EAFC,CAGXC,MAAM,CAAE,EAHG,CAIXC,KAAK,CAAE,EAJI,CAAb,CAMA,MAAKC,iBAAL,CAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,+BAAzB,CACA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBD,IAAlB,+BAApB,CATiB,aAUlB,C,+EAEiBE,K,CAAO,oBACvB,GAAMC,CAAAA,MAAM,CAAGD,KAAK,CAACC,MAArB,CACA,GAAMC,CAAAA,KAAK,CAAGD,MAAM,CAACC,KAArB,CACA,GAAMC,CAAAA,IAAI,CAAGF,MAAM,CAACE,IAApB,CAEA,KAAKC,QAAL,mDACGD,IADH,CACUD,KADV,yCAES,EAFT,mBAKA;AACA,GAAID,MAAM,CAACI,IAAP,GAAgB,UAApB,CAAgC,CAC9B,KAAKD,QAAL,CAAc,SAASZ,KAAT,CAAgB,CAC5B,GAAIA,KAAK,CAACE,QAAN,GAAmBF,KAAK,CAACG,MAA7B,CAAqC,CACnC,MAAO,CACLC,KAAK,CAAEX,EAAE,CAACqB,MAAH,CAAUC,iBADZ,CAAP,CAGD,CACF,CAND,EAOD,CACF,C,kDAEYP,K,CAAO,iBAClBA,KAAK,CAACQ,cAAN,GAEA,GAAI,KAAKhB,KAAL,CAAWI,KAAf,CAAsB,CACpB,OACD,CAED;AACA,GAAMa,CAAAA,QAAQ,CAAGrB,qBAAqB,CACpC,KAAKI,KAAL,CAAWC,KADyB,CAEpC,KAAKD,KAAL,CAAWE,QAFyB,CAAtC,CAKA,GAAIe,QAAJ,CAAc,CACZ,KAAKL,QAAL,CAAc,CACZR,KAAK,CAAEa,QADK,CAAd,EAGA,OACD,CAEDvB,aAAa,CAAC,KAAKM,KAAL,CAAWC,KAAZ,CAAmB,KAAKD,KAAL,CAAWE,QAA9B,CAAb,CACGgB,IADH,CACQ,UAAM,CACVC,OAAO,CAACC,GAAR,CAAY,YAAZ,EACD,CAHH,EAIGC,KAJH,CAIS,SAAAC,CAAC,CAAI,CACVH,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAAgCE,CAAhC,EACA,GAAIA,CAAC,CAACC,IAAF,GAAW,2BAAf,CAA4C,CAC1C,MAAI,CAACX,QAAL,CAAc,CACZR,KAAK,CAAE,sBADK,CAAd,EAGD,CACF,CAXH,EAYD,C,uCAEQ,CACP,GAAI,KAAKL,KAAL,CAAWyB,SAAX,GAAyBjC,UAAU,CAACkC,aAAxC,CAAuD,CACrD,mBAAO,oBAAC,MAAD,MAAP,CACD,CAED,GAAI,KAAK1B,KAAL,CAAWyB,SAAX,GAAyBjC,UAAU,CAACmC,SAAxC,CAAmD,CACjD,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACD,CAED,GAAMT,CAAAA,QAAQ,CAAG,KAAKjB,KAAL,CAAWI,KAA5B,CAEA,mBACE,4BAAM,QAAQ,CAAE,KAAKG,YAArB,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,uCADF,cAEE,2BAAK,SAAS,CAAC,KAAf,CAAqB,GAAG,CAAEV,KAA1B,CAAiC,GAAG,CAAC,aAArC,EAFF,CADF,cAME,2BAAK,SAAS,CAAC,YAAf,eACE,8BAAKJ,EAAE,CAACkC,SAAH,CAAaC,MAAlB,CADF,cAGE,6BACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAEnC,EAAE,CAACoC,WAAH,CAAeC,KAF9B,CAGE,IAAI,CAAC,OAHP,CAIE,QAAQ,CAAE,KAAKzB,iBAJjB,CAKE,QAAQ,KALV,EAHF,cAWE,6BACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAEZ,EAAE,CAACoC,WAAH,CAAeE,QAF9B,CAGE,IAAI,CAAC,UAHP,CAIE,QAAQ,CAAE,KAAK1B,iBAJjB,CAKE,QAAQ,KALV,EAXF,cAmBE,6BACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAEZ,EAAE,CAACoC,WAAH,CAAeG,eAF9B,CAGE,IAAI,CAAC,QAHP,CAIE,QAAQ,CAAE,KAAK3B,iBAJjB,CAKE,QAAQ,KALV,EAnBF,CA2BGY,QAAQ,eAAI,yBAAG,SAAS,CAAC,OAAb,YAA6BA,QAA7B,CA3Bf,cA4BE,8BAAQ,IAAI,CAAC,QAAb,WA5BF,cA8BE,iDA9BF,cA+BE,oBAAC,IAAD,EAAM,SAAS,CAAC,MAAhB,CAAuB,EAAE,CAAC,QAA1B,UA/BF,CANF,CADF,CADF,CA4CD,C,oBA5HkB7B,KAAK,CAAC6C,S,EA+H3B,cAAezC,CAAAA,QAAQ,CAACM,MAAD,CAAvB","sourcesContent":["import React from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nimport { authStates, withAuth } from \"../components/auth\";\nimport en from \"../utils/i18n\";\nimport { createNewUser } from \"../utils/firebase\";\nimport Loader from \"../components/loader\";\nimport { validateEmailPassword } from \"../utils/helpers\";\n\nimport \"../styles/login.css\";\nimport plane from '../assets/plane.png';\n\nclass SignUp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\",\n      retype: \"\",\n      error: \"\",\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n\n    this.setState({\n      [name]: value,\n      error: \"\",\n    });\n\n    //Verify that password fields match\n    if (target.type === \"password\") {\n      this.setState(function(state) {\n        if (state.password !== state.retype) {\n          return {\n            error: en.ERRORS.PASSWORD_MISMATCH,\n          };\n        }\n      });\n    }\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    if (this.state.error) {\n      return;\n    }\n\n    //Validate email & password\n    const errorMsg = validateEmailPassword(\n      this.state.email,\n      this.state.password\n    );\n\n    if (errorMsg) {\n      this.setState({\n        error: errorMsg,\n      });\n      return;\n    }\n\n    createNewUser(this.state.email, this.state.password)\n      .then(() => {\n        console.log(\"Signed Up!\");\n      })\n      .catch(e => {\n        console.log(\"Error signing up\", e);\n        if (e.code === \"auth/email-already-in-use\") {\n          this.setState({\n            error: \"Email already in use\",\n          });\n        }\n      });\n  }\n\n  render() {\n    if (this.props.authState === authStates.INITIAL_VALUE) {\n      return <Loader />;\n    }\n\n    if (this.props.authState === authStates.LOGGED_IN) {\n      return <Redirect to=\"/\"></Redirect>;\n    }\n\n    const errorMsg = this.state.error;\n\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"container\">\n          <div className=\"welcomecard\">\n            <h1>FlyMe!</h1>\n            <img className=\"img\" src={plane} alt=\"description\" />\n          </div>\n\n          <div className=\"inputfield\">\n            <h2>{en.GREETINGS.SIGNUP}</h2>\n\n            <input\n              type=\"text\"\n              placeholder={en.FORM_FIELDS.EMAIL}\n              name=\"email\"\n              onChange={this.handleInputChange}\n              required\n            />\n\n            <input\n              type=\"password\"\n              placeholder={en.FORM_FIELDS.PASSWORD}\n              name=\"password\"\n              onChange={this.handleInputChange}\n              required\n            />\n\n            <input\n              type=\"password\"\n              placeholder={en.FORM_FIELDS.RETYPE_PASSWORD}\n              name=\"retype\"\n              onChange={this.handleInputChange}\n              required\n            />\n\n            {errorMsg && <p className=\"error\">Error: {errorMsg}</p>}\n            <button type=\"submit\">Signup</button>\n\n            <p>Already a member?</p>\n            <Link className=\"link\" to=\"/login\">Login</Link>  \n          </div>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default withAuth(SignUp);\n"]},"metadata":{},"sourceType":"module"}