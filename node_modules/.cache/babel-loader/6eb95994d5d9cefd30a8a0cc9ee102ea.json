{"ast":null,"code":"import _classCallCheck from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/kalolevente/Downloads/planetaxi/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{initialize,attachAuthListener}from\"../utils/firebase\";export var authStates={INITIAL_VALUE:\"unknown\",LOGGED_IN:\"logged_in\",LOGGED_OUT:\"logged_out\"};export function withAuth(WrappedComponent){return/*#__PURE__*/function(_React$Component){_inherits(_class,_React$Component);var _super=_createSuper(_class);function _class(props){var _this;_classCallCheck(this,_class);_this=_super.call(this,props);_this.state={user:undefined,authState:authStates.INITIAL_VALUE};initialize();_this.unsubscribe=attachAuthListener(function(user){if(user){this.setState({user:user,authState:authStates.LOGGED_IN});}else{this.setState({user:user,authState:authStates.LOGGED_OUT});}}.bind(_assertThisInitialized(_this)));return _this;}_createClass(_class,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unsubscribe();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(WrappedComponent,Object.assign({authState:this.state.authState,user:this.state.user},this.props));}}]);return _class;}(React.Component);}","map":{"version":3,"sources":["/Users/kalolevente/Downloads/planetaxi/src/components/auth.js"],"names":["React","initialize","attachAuthListener","authStates","INITIAL_VALUE","LOGGED_IN","LOGGED_OUT","withAuth","WrappedComponent","props","state","user","undefined","authState","unsubscribe","setState","bind","Component"],"mappings":"6lBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,UAAT,CAAqBC,kBAArB,KAA+C,mBAA/C,CAEA,MAAO,IAAMC,CAAAA,UAAU,CAAG,CACxBC,aAAa,CAAE,SADS,CAExBC,SAAS,CAAE,WAFa,CAGxBC,UAAU,CAAE,YAHY,CAAnB,CAMP,MAAO,SAASC,CAAAA,QAAT,CAAkBC,gBAAlB,CAAoC,CACzC,iHACE,gBAAYC,KAAZ,CAAmB,wCACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,IAAI,CAAEC,SADK,CAEXC,SAAS,CAAEV,UAAU,CAACC,aAFX,CAAb,CAKAH,UAAU,GACV,MAAKa,WAAL,CAAmBZ,kBAAkB,CACnC,SAASS,IAAT,CAAe,CACb,GAAIA,IAAJ,CAAU,CACR,KAAKI,QAAL,CAAc,CACZJ,IAAI,CAAEA,IADM,CAEZE,SAAS,CAAEV,UAAU,CAACE,SAFV,CAAd,EAID,CALD,IAKO,CACL,KAAKU,QAAL,CAAc,CACZJ,IAAI,CAAEA,IADM,CAEZE,SAAS,CAAEV,UAAU,CAACG,UAFV,CAAd,EAID,CACF,CAZD,CAYEU,IAZF,+BADmC,CAArC,CARiB,aAuBlB,CAxBH,sFA0ByB,CACrB,KAAKF,WAAL,GACD,CA5BH,uCA8BW,CACP,mBACE,oBAAC,gBAAD,gBACE,SAAS,CAAE,KAAKJ,KAAL,CAAWG,SADxB,CAEE,IAAI,CAAE,KAAKH,KAAL,CAAWC,IAFnB,EAGM,KAAKF,KAHX,EADF,CAOD,CAtCH,oBAAqBT,KAAK,CAACiB,SAA3B,EAwCD","sourcesContent":["import React from \"react\";\n\nimport { initialize, attachAuthListener } from \"../utils/firebase\";\n\nexport const authStates = {\n  INITIAL_VALUE: \"unknown\",\n  LOGGED_IN: \"logged_in\",\n  LOGGED_OUT: \"logged_out\",\n};\n\nexport function withAuth(WrappedComponent) {\n  return class extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        user: undefined,\n        authState: authStates.INITIAL_VALUE,\n      };\n\n      initialize();\n      this.unsubscribe = attachAuthListener(\n        function(user) {\n          if (user) {\n            this.setState({\n              user: user,\n              authState: authStates.LOGGED_IN,\n            });\n          } else {\n            this.setState({\n              user: user,\n              authState: authStates.LOGGED_OUT,\n            });\n          }\n        }.bind(this)\n      );\n    }\n\n    componentWillUnmount() {\n      this.unsubscribe();\n    }\n\n    render() {\n      return (\n        <WrappedComponent\n          authState={this.state.authState}\n          user={this.state.user}\n          {...this.props}\n        />\n      );\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}